
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>glow-body-brain</title>
    <meta name="description" content="Lovable Generated Project" />
    <meta name="author" content="Lovable" />
    <meta property="og:image" content="https://lovable.dev/opengraph-image-p98pqg.png" />
    
    <script>
      // Debug function
      window.debugLog = function(message, data) {
        console.log(`[MainApp] ${message}`, data || '');
      }
      
      // Improved GitHub Pages path handling with logging
      (function() {
        // This function detects if we're on GitHub Pages and adjusts the base path
        const { protocol, hostname, pathname } = window.location;
        
        console.log("Current URL:", window.location.href);
        console.log("Hostname:", hostname);
        console.log("Pathname:", pathname);
        
        let basePath = '/';
        
        // If we're on GitHub Pages (github.io domain) or Lovable preview
        if (hostname.includes('github.io') || hostname.includes('lovable.app')) {
          // Get the repository name from the pathname
          const pathSegments = pathname.split('/');
          console.log("Path segments:", pathSegments);
          
          if (pathSegments.length > 1 && pathSegments[1] !== '') {
            // Format: /<repo-name>/
            basePath = '/' + pathSegments[1] + '/';
            console.log('GitHub Pages or Preview detected. Setting base path:', basePath);
            document.write('<base href="' + basePath + '">');
          } else {
            document.write('<base href="/">');
          }
        } else {
          // For local or custom domain deployments
          document.write('<base href="/">');
          console.log('Local or custom domain detected. Base path set to: /');
        }
        
        // Store the base path for later use
        window.basePath = basePath;
        window.BASE_PATH = basePath;
      })();
    </script>
  </head>

  <body>
    <div id="root"></div>
    <!-- Add the required Lovable script tag -->
    <script src="https://cdn.gpteng.co/gptengineer.js" type="module"></script>
    <script type="module">
      import { createRoot } from 'react-dom/client';
      import { App } from './src/main.tsx';
      
      const root = document.getElementById('root');
      if (root) {
        createRoot(root).render(App());
      }
    </script>
    
    <style>
      /* Add global style for spinner animation */
      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }
    </style>
  </body>
</html>
